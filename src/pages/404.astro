---
import Layout from "../layouts/Layout.astro";
import "../styles/global.css";
---

<Layout>
  <div class="min-h-screen bg-background flex items-center justify-center p-4">
    <div class="max-w-2xl w-full">
      <div class="border border-primary/30 bg-background/50 p-8 font-mono">
        {/* Terminal Header */}
        <div
          class="flex items-center gap-2 mb-6 pb-4 border-b border-primary/30"
        >
          <div class="flex gap-1.5">
            <div class="w-3 h-3 rounded-full bg-red-500/80"></div>
            <div class="w-3 h-3 rounded-full bg-yellow-500/80"></div>
            <div class="w-3 h-3 rounded-full bg-green-500/80"></div>
          </div>
          <span class="text-primary/60 text-sm">root@portfolio:~$</span>
        </div>

        {/* ASCII Art 404 */}
        <pre
          class="text-primary text-xs sm:text-sm mb-6 overflow-x-auto">
            {`
  ██╗  ██╗ ██████╗ ██╗  ██╗
  ██║  ██║██╔═████╗██║  ██║
  ███████║██║██╔██║███████║
  ╚════██║████╔╝██║╚════██║
       ██║╚██████╔╝     ██║
       ╚═╝ ╚═════╝      ╚═╝
`}
          </pre>

        {/* Error Messages */}
        <div class="space-y-3 mb-8">
          <p class="text-primary">
            <span class="text-red-500">[ERROR]</span> Página no encontrada en la
            base de datos
          </p>
          <p class="text-primary/80">
            <span class="text-yellow-500">[WARNING]</span> La página que estás buscando
            ha sido:
          </p>
          <ul class="text-primary/70 space-y-1 ml-8 list-none">
            <li>→ Eliminada por una IA malvada 🤖</li>
            <li>→ Robada por hackers (de los malos) 🕵️</li>
            <li>→ Perdida en la matrix 🌐</li>
            <li>→ Devorada por un bug (literalmente) 🐛</li>
            <li>→ O quizás simplemente escribiste mal... 🤷</li>
          </ul>
        </div>

        {/* Terminal Commands */}
        <div
          id="terminal"
          class="bg-black/30 border border-primary/20 p-4 space-y-2 font-mono text-sm sm:text-base min-h-[250px] overflow-y-auto"
        >
          <!-- Las líneas se insertarán aquí dinámicamente -->
        </div>

        {/* Action Buttons */}
        <div class="flex flex-col sm:flex-row gap-3">
          <a
            href="/"
            class="flex-1 bg-primary/10 hover:bg-primary/20 border border-primary text-primary px-6 py-3 text-center transition-colors"
          >
            <span class="mr-2">→</span>
            cd /inicio
          </a>
        </div>

        {/* Footer Message */}
        <div class="mt-6 pt-6 border-t border-primary/30">
          <p class="text-primary/50 text-sm text-center">
            <span class="text-green-500">[TIP]</span> Prueba a usar la navegación
            del sitio o simplemente vuelve al inicio.
          </p>
        </div>
      </div>
    </div>
  </div>
</Layout>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const terminal = document.getElementById("terminal");

    const lines = [
      {
        text: "root@portfolio:~$ ls -la /pages/",
        color: "text-primary/60",
        delay: 500,
      },
      {
        text: "ls: no se puede acceder a '/pages/': El fichero o directorio no existe",
        color: "text-red-500",
        delay: 1000,
      },
      {
        text: "root@portfolio:~$ sudo find-page",
        color: "text-primary/60",
        delay: 500,
      },
      {
        text: "[sudo] password for root: ********",
        color: "text-yellow-500",
        delay: 1000,
      },
      {
        text: "Error: Página no encontrada. ¿Quisiste decir '/' ?",
        color: "text-red-500",
        delay: 1000,
      },
    ];

    let idx = 0;

    function typeLine(line, callback) {
      let i = 0;
      const p = document.createElement("p");
      p.className = line.color;
      terminal.appendChild(p);

      function typeChar() {
        if (i < line.text.length) {
          p.textContent += line.text[i];
          i++;
          setTimeout(typeChar, 50); // velocidad de tipeo
        } else if (callback) {
          setTimeout(callback, line.delay);
        }
      }

      typeChar();
    }

    function nextLine() {
      if (idx < lines.length) {
        typeLine(lines[idx], nextLine);
        idx++;
      } else {
        // Al final agregamos el cursor parpadeante
        const p = document.createElement("p");
        p.innerHTML = `<span class="text-primary/60">root@portfolio:~$ </span><span class="cursor">_</span>`;
        terminal.appendChild(p);
      }
    }

    nextLine();
  });
</script>

<style>
  @keyframes blink {
    50% {
      opacity: 0;
    }
  }

  .cursor {
    display: inline-block;
    width: 0.7ch;
    animation: blink 1s step-start infinite;
    color: #00ff00; /* verde terminal, puedes cambiarlo */
  }
</style>
