---
interface Message {
  role: "user" | "assistant";
  content: string;
  timestamp: string;
}

const initialMessages: Message[] = [
  {
    role: "user",
    content: "¿Cuál es tu experiencia con microservicios?",
    timestamp: "14:32:15",
  },
  {
    role: "assistant",
    content:
      "Tengo amplia experiencia diseñando y desplegando arquitecturas de microservicios. He trabajado con Docker, Kubernetes, y patrones como API Gateway, Circuit Breaker y Event Sourcing. En mi último proyecto, migré un monolito a 12 microservicios que manejan 2M+ requests diarios.",
    timestamp: "14:32:18",
  },
  {
    role: "user",
    content: "¿Qué bases de datos dominas?",
    timestamp: "14:33:42",
  },
  {
    role: "assistant",
    content:
      "Trabajo principalmente con PostgreSQL para datos relacionales, Redis para caching y sesiones, y MongoDB para datos no estructurados. También tengo experiencia con Elasticsearch para búsquedas full-text y TimescaleDB para series temporales. Me enfoco en optimización de queries, indexación y estrategias de sharding.",
    timestamp: "14:33:45",
  },
];
---

<section id="ai-chat" class="py-20 px-4 border-t border-primary/30">
  <div class="container mx-auto max-w-4xl">
    <div class="space-y-6">
      <div class="flex items-center justify-between">
        <h2 class="text-2xl md:text-3xl font-bold text-accent">
          &gt; ./ai_assistant_chat.sh
        </h2>
        <div class="flex items-center gap-2 text-xs text-muted-foreground">
          <div class="w-2 h-2 bg-primary rounded-full animate-pulse"></div>
          <span>AI Assistant Online</span>
        </div>
      </div>

      <div
        class="border border-primary/30 bg-card rounded overflow-hidden"
        id="chat-container"
      >
        <!-- Chat Header -->
        <div
          class="folder-header flex items-center justify-between bg-primary/10 px-3 py-1 select-none"
        >
          <div class="flex items-center gap-1">
            <span class="folder-icon text-accent">📝</span>
            <span class="font-semibold">ai_assistant_2025.log</span>
          </div>
          <div class="folder-controls flex gap-2">
            <button type="button" class="w-3 h-3 rounded-full bg-red-500"></button>
            <button type="button" class="w-3 h-3 rounded-full bg-yellow-400"></button>
            <button type="button" class="w-3 h-3 rounded-full bg-green-500"></button>
          </div>
        </div>

        <!-- Chat Messages -->
        <div
          id="chat-messages"
          class="p-6 space-y-6 max-h-[600px] overflow-y-auto scroll-smooth"
        >
          {
            initialMessages.map((message) => (
              <div
                class={`flex gap-3 ${message.role === "user" ? "justify-end" : "justify-start"}`}
              >
                <div
                  class={`max-w-[80%] space-y-2 ${message.role === "user" ? "order-2" : "order-1"}`}
                >
                  <div class="flex items-center gap-2 text-xs text-muted-foreground">
                    <span>
                      {message.role === "user" ? "user@terminal" : "ai_assistant"}
                    </span>
                    <span>•</span>
                    <span>{message.timestamp}</span>
                  </div>
                  <div
                    class={`border p-4 text-sm leading-relaxed rounded ${
                      message.role === "user"
                        ? "border-accent bg-accent/10 text-foreground"
                        : "border-primary/30 bg-primary/5 text-foreground"
                    }`}
                  >
                    <p>{message.content}</p>
                  </div>
                </div>
              </div>
            ))
          }
        </div>

        <!-- Chat Input -->
        <div class="border-t border-primary/30 p-4">
          <div class="flex gap-2">
            <input
              id="chat-input"
              type="text"
              placeholder="> Escribe tu pregunta aquí..."
              class="flex-1 border border-primary/30 bg-background px-4 py-2 text-sm text-muted-foreground focus:outline-none focus:ring-1 focus:ring-primary focus:text-foreground rounded"
            />
            <button
              id="chat-send"
              type="button"
              class="border border-primary/30 bg-primary/10 px-6 py-2 text-sm text-primary hover:bg-primary/20 transition-colors rounded cursor-pointer"
            >
              ENVIAR
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<script src="/src/scripts/chat.js"></script>
